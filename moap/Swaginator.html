<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="pragma" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LSL Message</title>
  <style>
    /* ========= “Globals” — tweak these ============== */
  :root{
    --radius: 0;
    --padding: 2vmin;          /* small margin inside the edge */
    --max-width: 100vw;        /* no width cap */
    --size: clamp(16px, 7vmin, 96px); /* scale with panel; raise 7→8vmin if you want bigger */
    --line-height: 1.15;       /* tighter lines to fit more text */
    --shadow: none;            /* optional: no shadow for true edge-to-edge */
    --align: center;           /* or 'left' if you prefer */
  }

    /* ================================================ */

    html, body {
      background: var(--bg);
      color: var(--fg);
      font-family: var(--font);
      margin: 0; padding: 0;
      height: 100%;
    }
  .wrap{ min-height:100vh; padding:0; }
  .card{
    width:100vw; height:100vh; 
    border:none; border-radius:0; box-shadow:none;
    background:var(--bg);
    display:grid; place-items:center; /* vertical + horizontal centering */
    padding:var(--padding);
  }
  .msg{
    font-size:var(--size);
    line-height:var(--line-height);
    text-align:var(--align);
    max-width:100%;
    max-height:100%;
    overflow:hidden;            /* avoid scrollbars in MOAP */
    word-break:break-word;
    overflow-wrap:anywhere;
  }
  .accent{ display:none; }      /* optional: remove the bar */

  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div id="message" class="msg">…</div>
      <div class="accent" aria-hidden="true"></div>
    </div>
  </div>

  <script>
    (function () {
      // ---- config you might tweak in one place ----
      var MAX_LEN = 250;

      function escapeHTML(s) {
        return s
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#39;");
      }

      function getParam(name) {
        var params = new URLSearchParams(window.location.search);
        return params.get(name);
      }

      var raw = getParam("t") || "";
      // normalize whitespace; keep intentional newlines
      // If you *don’t* want line breaks, swap the <br> with a single space join.
      raw = raw.replace(/\r\n/g, "\n").replace(/\r/g, "\n");

      // Enforce limit
      var trimmed = raw;
      if (trimmed.length > MAX_LEN) {
        trimmed = trimmed.slice(0, MAX_LEN - 1) + "…";
      }

      // Escape then convert newlines to <br>
      var safe = escapeHTML(trimmed).replace(/\n/g, "<br/>");

      // Fallback placeholder if empty
      if (!safe || safe.trim().length === 0) {
        safe = "<span style='opacity:.7'>(no message)</span>";
      }

      document.getElementById("message").innerHTML = safe;
    })();
  </script>
</body>
</html>
