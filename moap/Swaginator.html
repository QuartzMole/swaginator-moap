<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="pragma" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LSL Message</title>
  <style>
    /* --- Banner preset for very wide, short MOAP faces --- */
    :root{
      --bg:#0f1115;                     /* background */
      --fg:#e9eef5;                     /* text color */
      --accent:#7aa2f7;                 /* unused in banner; keep if you re-add bar */
      --font:ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto,
              'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif;

      --align:center;                   /* left | center | right */
      --radius:0;
      --padding:2vmin;                  /* inner breathing room */
      --line:1.0;                       /* tighter for single line */
      /* Size driven by HEIGHT so it fills the strip.
         55vh = 55% of the viewport height, clamped to stay readable. */
      --size:clamp(12px, 55vh, 96px);
    }

    *{ box-sizing:border-box; }

    html, body{
      margin:0; padding:0; height:100%;
      background:var(--bg); color:var(--fg); font-family:var(--font);
      overflow:hidden;                    /* kill scrollbars */
    }

    .wrap{ width:100vw; height:100vh; padding:0; }
    .card{
      width:100vw; height:100vh;
      background:var(--bg);
      border:none; border-radius:0; box-shadow:none;
      display:grid; place-items:center;
      padding:var(--padding);
    }

    .msg{
      font-size:var(--size);
      line-height:var(--line);
      text-align:var(--align);
      white-space:nowrap;                 /* single line for banners */
      overflow:hidden; text-overflow:ellipsis;
      letter-spacing:.2px;
    }

    .accent{ display:none; }

    /* Hide any WebKit scrollbars just in case (SL viewer is Chromium-based) */
    ::-webkit-scrollbar{ width:0; height:0; }
  </style>

</head>
<body>
  <div class="wrap">
    <div class="card">
      <div id="message" class="msg">…</div>
      <div class="accent" aria-hidden="true"></div>
    </div>
  </div>

  <script>
    (function () {
      // ---- config you might tweak in one place ----
      var MAX_LEN = 250;

      function escapeHTML(s) {
        return s
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#39;");
      }

      function getParam(name) {
        var params = new URLSearchParams(window.location.search);
        return params.get(name);
      }

      var raw = getParam("t") || "";
      // normalize whitespace; keep intentional newlines
      // If you *don’t* want line breaks, swap the <br> with a single space join.
      raw = raw.replace(/\r\n/g, "\n").replace(/\r/g, "\n");

      // Enforce limit
      var trimmed = raw;
      if (trimmed.length > MAX_LEN) {
        trimmed = trimmed.slice(0, MAX_LEN - 1) + "…";
      }

      // Escape then convert newlines to <br>
      // BEFORE: var safe = escapeHTML(trimmed).replace(/\n/g, "<br/>");
      var safe = escapeHTML(trimmed).replace(/\n/g, " ");


      // Fallback placeholder if empty
      if (!safe || safe.trim().length === 0) {
        safe = "<span style='opacity:.7'>(no message)</span>";
      }

      document.getElementById("message").innerHTML = safe;
    })();
  </script>
</body>
</html>
