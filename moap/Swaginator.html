<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="pragma" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LSL Message</title>
  :root{
    --bg:#0f1115;
    --fg:#e9eef5;
    --font:ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,
           'Helvetica Neue',Arial,'Noto Sans','Liberation Sans',sans-serif;

    --align:center;
    --pad:2vmin;

    /* How many lines you allow */
    --max-lines:3;

    /* More space under each line (was ~1.15) */
    --line:1.28;

    /* Slightly smaller text (multiplier 0.82 < 0.92) */
    --size:clamp(
      12px,
      calc((100vh - (var(--pad)*2)) / var(--max-lines) * 0.82),
      72px
    );
  }

  .msg{
    padding:var(--pad);
    font-size:var(--size);
    line-height:var(--line);
    text-align:var(--align);
    white-space:normal;
    word-break:break-word;
    overflow-wrap:anywhere;
    hyphens:auto;

    /* keep to N lines, no scrollbars */
    display:-webkit-box;
    -webkit-box-orient:vertical;
    -webkit-line-clamp:var(--max-lines);
    overflow:hidden;
    text-overflow:ellipsis;
  }



</head>
<body>
  <div class="wrap">
    <div class="card">
      <div id="message" class="msg">…</div>
      <div class="accent" aria-hidden="true"></div>
    </div>
  </div>

  <script>
    (function () {
      // ---- config you might tweak in one place ----
      var MAX_LEN = 250;

      function escapeHTML(s) {
        return s
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#39;");
      }

      function getParam(name) {
        var params = new URLSearchParams(window.location.search);
        return params.get(name);
      }

      var raw = getParam("t") || "";
      // normalize whitespace; keep intentional newlines
      // If you *don’t* want line breaks, swap the <br> with a single space join.
      raw = raw.replace(/\r\n/g, "\n").replace(/\r/g, "\n");

      // Enforce limit
      var trimmed = raw;
      if (trimmed.length > MAX_LEN) {
        trimmed = trimmed.slice(0, MAX_LEN - 1) + "…";
      }

      // Escape then convert newlines to <br>
      // BEFORE: var safe = escapeHTML(trimmed).replace(/\n/g, "<br/>");
      var safe = escapeHTML(trimmed).replace(/\n/g, "<br/>");



      // Fallback placeholder if empty
      if (!safe || safe.trim().length === 0) {
        safe = "<span style='opacity:.7'>(no message)</span>";
      }

      document.getElementById("message").innerHTML = safe;
    })();
  </script>
</body>
</html>
