<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="pragma" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LSL Message</title>
  <style>
    /* ========= “Globals” — tweak these ============== */
    :root{
      --bg:          #0f1115;
      --fg:          #e9eef5;
      --accent:      #7aa2f7;
      --font:        ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      --size:        clamp(14px, 2.2vmin, 20px);
      --weight:      600;
      --radius:      16px;
      --padding:     14px 16px;
      --max-width:   96vw;   /* Shared Media panel width */
      --align:       center; /* left | center | right    */
      --shadow:      0 6px 20px rgba(0,0,0,.35);
      --line-height: 1.35;
      --gap:         10px;
    }
    /* ================================================ */

    html, body {
      background: var(--bg);
      color: var(--fg);
      font-family: var(--font);
      margin: 0; padding: 0;
      height: 100%;
    }
    .wrap {
      min-height: 100%;
      display: grid;
      place-items: center;
      padding: 1.5vh 1.5vw;
      box-sizing: border-box;
    }
    .card {
      width: min(var(--max-width), 900px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border: 1px solid rgba(255,255,255,.08);
      padding: var(--padding);
    }
    .msg {
      font-size: var(--size);
      font-weight: var(--weight);
      line-height: var(--line-height);
      text-align: var(--align);
      letter-spacing: .2px;
      word-break: break-word;
      overflow-wrap: anywhere;
    }
    .accent {
      display: inline-block;
      height: 3px;
      width: 60px;
      border-radius: 3px;
      background: var(--accent);
      margin: var(--gap) auto 0;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div id="message" class="msg">…</div>
      <div class="accent" aria-hidden="true"></div>
    </div>
  </div>

  <script>
    (function () {
      // ---- config you might tweak in one place ----
      var MAX_LEN = 250;

      function escapeHTML(s) {
        return s
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#39;");
      }

      function getParam(name) {
        var params = new URLSearchParams(window.location.search);
        return params.get(name);
      }

      var raw = getParam("t") || "";
      // normalize whitespace; keep intentional newlines
      // If you *don’t* want line breaks, swap the <br> with a single space join.
      raw = raw.replace(/\r\n/g, "\n").replace(/\r/g, "\n");

      // Enforce limit
      var trimmed = raw;
      if (trimmed.length > MAX_LEN) {
        trimmed = trimmed.slice(0, MAX_LEN - 1) + "…";
      }

      // Escape then convert newlines to <br>
      var safe = escapeHTML(trimmed).replace(/\n/g, "<br/>");

      // Fallback placeholder if empty
      if (!safe || safe.trim().length === 0) {
        safe = "<span style='opacity:.7'>(no message)</span>";
      }

      document.getElementById("message").innerHTML = safe;
    })();
  </script>
</body>
</html>
